# DFO Party Management System - TODO

## 🚀 완료된 작업

### ✅ 프론트엔드 UI 개선
- [x] 캐릭터 카드 디자인 개선 (서버-레벨-이름 순서)
- [x] "남은 숙제" 타이틀 추가
- [x] 던전 클리어 상태 O/X 표시 (클리어: O, 미클리어: X)
- [x] 직업별 스탯 표시 (버퍼: 버프력, 딜러: 총딜)
- [x] 연필 버튼으로 수동 입력 기능
- [x] Neople API 링크 푸터 추가
- [x] 주황색 레벨 표시 제거
- [x] 던전 클리어 상태 색상 수정 (클리어: 초록색, 미클리어: 빨간색)

### ✅ 백엔드 기능 개선
- [x] 모험단 정보 자동 DB 저장
- [x] 캐릭터-모험단 관계 설정
- [x] JobType 엔티티 및 Repository 추가
- [x] 직업별 버퍼/딜러 구분 로직 DB 기반으로 개선
- [x] 캐릭터 검색 시 모험단 정보 자동 조회

### ✅ 데이터베이스 스키마
- [x] Adventure 엔티티 분리
- [x] Character-Adventure ManyToOne 관계 설정
- [x] JobType 테이블 생성 및 초기 데이터 입력

## 🔄 진행 중인 작업

### 📱 캐릭터 상세 정보 페이지 개발
- [x] CharacterDetail.vue 페이지 생성
- [x] 라우터 설정 추가
- [x] 캐릭터 카드 클릭 시 상세 페이지 이동
- [ ] 상세 페이지에서 스탯 수정 기능 구현
- [ ] 상세 페이지에서 즐겨찾기 설정 기능 구현

## 📋 예정된 작업

### 🎯 우선순위 높음
- [ ] 캐릭터 상세 페이지 API 연동
- [ ] 스탯 수정 API 구현
- [ ] 즐겨찾기 설정 API 구현
- [ ] 모험단 정보 표시 개선 (현재 "모험단 정보 없음" 표시)

### 🎯 우선순위 중간
- [ ] 던전 클리어 상태 실시간 업데이트
- [ ] 캐릭터 이미지 표시 (DFO API에서 제공하는 경우)
- [ ] 검색 결과 페이지네이션
- [ ] 캐릭터 검색 히스토리 기능

### 🎯 우선순위 낮음
- [ ] 캐릭터 비교 기능
- [ ] 파티 최적화 알고리즘 개선
- [ ] 던전별 파티 추천 시스템
- [ ] 모바일 반응형 디자인 개선

## 🐛 알려진 이슈

### 🔴 심각한 이슈
- **SSE 연결 안정성 문제**: ClientAbortException (Broken pipe) 발생으로 실시간 업데이트 불안정
- **백엔드 예외 처리 문제**: SSE 연결 시 HttpMessageNotWritableException 발생
- **Nginx Upstream 타임아웃**: SSE 연결 시 백엔드 응답 타임아웃으로 인한 연결 실패
- **OOM 메모리 누수 문제**: java.lang.OutOfMemoryError: Java heap space 발생으로 인한 백엔드 크래시

### 🟡 주의가 필요한 이슈
- 모험단 정보가 "모험단 정보 없음"으로 표시되는 경우 (DFO API 응답 확인 필요)
- 일부 직업의 버퍼/딜러 구분이 정확하지 않을 수 있음
- **직업 표시 문제**: "귀검사(여) (베가본드)" 형태로 표시되는데, 괄호 안의 직업명만 표시되도록 수정 필요
- **MariaDB 연결 경고**: 인증되지 않은 연결 시도로 인한 경고 로그 발생

### 🟢 경미한 이슈
- 캐릭터 카드 하단의 중복 정보 표시
- 일부 UI 요소의 반응성 개선 필요

## 📝 기술적 개선사항

### 🔧 백엔드
- [ ] 캐릭터 검색 성능 최적화
- [ ] 캐싱 시스템 구현
- [ ] 에러 핸들링 개선
- [ ] 로깅 시스템 개선
- [x] **SSE 연결 안정성 개선**: ClientAbortException 처리 및 재연결 로직 구현
- [x] **SSE 예외 처리기 구현**: Content-Type 'text/event-stream' 전용 예외 처리
- [x] **데이터베이스 연결 풀 최적화**: 불필요한 연결 시도 방지
- [x] **JVM 메모리 설정 최적화**: Helm 차트에 JAVA_OPTS 추가 (Xms512m, Xmx1g)
- [x] **Playwright 리소스 관리 개선**: PreDestroy 메서드로 브라우저 인스턴스 정리
- [x] **SSE 연결 수 제한**: 클라이언트당 최대 3개, 전체 최대 100개 연결 제한
- [x] **메모리 모니터링 서비스**: 주기적 메모리 사용량 체크 및 OOM 위험 감지
- [x] **메모리 상태 API**: 실시간 메모리 상태 확인 및 수동 GC 실행 엔드포인트

### 🔧 프론트엔드
- [ ] 상태 관리 최적화 (Pinia 스토어 활용)
- [ ] 컴포넌트 재사용성 개선
- [ ] 타입 안정성 강화 (TypeScript)
- [ ] 테스트 코드 작성

## 📊 성능 최적화

### 🚀 데이터베이스
- [ ] 인덱스 최적화
- [ ] 쿼리 성능 개선
- [ ] 연결 풀 설정 최적화

### 🚀 API 응답
- [ ] 응답 시간 개선
- [ ] 데이터 압축
- [ ] CDN 활용 검토
- [ ] **Nginx 타임아웃 설정 최적화**: SSE 연결을 위한 upstream 타임아웃 값 조정
- [ ] **백엔드 응답 시간 최적화**: SSE 연결 시 응답 지연 문제 해결

## 🔒 보안 및 권한

### 🛡️ 인증/인가
- [ ] 사용자 로그인 시스템
- [ ] 권한 관리 시스템
- [ ] API 키 관리

### 🛡️ 데이터 보호
- [ ] 개인정보 암호화
- [ ] API 요청 제한
- [ ] 로그 보안

## 📱 사용자 경험

### 🎨 UI/UX
- [ ] 다크 모드 지원
- [ ] 키보드 단축키 지원
- [ ] 접근성 개선
- [ ] 다국어 지원

### 📱 반응형 디자인
- [ ] 모바일 최적화
- [ ] 태블릿 지원
- [ ] 다양한 화면 크기 대응

## 🧪 테스트 및 품질

### 🧪 테스트
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 작성
- [ ] E2E 테스트 작성
- [ ] 성능 테스트

### 📊 모니터링
- [ ] 애플리케이션 성능 모니터링
- [ ] 에러 추적 시스템
- [ ] 사용자 행동 분석
- [ ] 서버 리소스 모니터링

---

**마지막 업데이트**: 2024년 12월 19일
**담당자**: 개발팀
**상태**: 개발 진행 중 