# 환경변수 설정 가이드

## 📁 config.env 파일 설정

DFO Party Management Application을 실행하기 전에 `config.env` 파일을 생성하고 필요한 환경변수를 설정해야 합니다.

### 1. config.env 파일 생성

프로젝트 루트 디렉토리에 `config.env` 파일을 생성하고 다음 내용을 추가하세요:

```bash
# DFO Party Management Application Environment Variables
# This file contains sensitive information and should not be committed to git

# API Key for DFO Party Management Application
DF_API_KEY=your_actual_api_key_here

# Database Configuration (if needed)
DB_HOST=dfo-party-mariadb
DB_PORT=3306
DB_NAME=dnfp
DB_USERNAME=dfparty
DB_PASSWORD=dfparty-password

# Other Configuration
SPRING_PROFILES_ACTIVE=prod
```

### 2. API 키 설정

`DF_API_KEY`에는 실제 API 키 값을 설정하세요. 예시:
- `DF_API_KEY=abc123def456ghi789`
- `DF_API_KEY=my-secret-api-key-2024`

## 🚫 Git에서 제외

`config.env` 파일은 민감한 정보를 포함하고 있으므로 Git에서 추적하지 않습니다. `.gitignore`에 이미 추가되어 있습니다.

## 🔧 스크립트 실행

환경변수를 설정한 후 다음 스크립트를 실행할 수 있습니다:

### Docker 이미지 빌드 및 푸시
```powershell
.\deploy.ps1
```

### Helm 차트 배포
```powershell
.\deploy-helm.ps1
```

## 📁 네임스페이스 정보

모든 스크립트는 `dfo` 네임스페이스를 사용합니다:
- **네임스페이스**: `dfo`
- **자동 생성**: 네임스페이스가 없으면 자동으로 생성됩니다
- **배포 위치**: 모든 Kubernetes 리소스가 `dfo` 네임스페이스에 배포됩니다

## 📋 환경변수 목록

| 변수명 | 설명 | 기본값 | 필수여부 |
|--------|------|--------|----------|
| `DF_API_KEY` | DFO Party Management Application API 키 | - | ✅ 필수 |
| `DB_HOST` | 데이터베이스 호스트 | dfo-party-mariadb | ❌ 선택 |
| `DB_PORT` | 데이터베이스 포트 | 3306 | ❌ 선택 |
| `DB_NAME` | 데이터베이스 이름 | dnfp | ❌ 선택 |
| `DB_USERNAME` | 데이터베이스 사용자명 | dfparty | ❌ 선택 |
| `DB_PASSWORD` | 데이터베이스 비밀번호 | dfparty-password | ❌ 선택 |
| `SPRING_PROFILES_ACTIVE` | Spring Boot 프로필 | kubernetes | ❌ 선택 |

## ⚠️ 주의사항

1. **보안**: `config.env` 파일에는 민감한 정보가 포함되어 있습니다. 절대 Git에 커밋하지 마세요.
2. **백업**: 프로덕션 환경에서는 `config.env` 파일을 안전한 곳에 백업해두세요.
3. **권한**: `config.env` 파일의 읽기 권한을 제한하여 보안을 강화하세요.

## 🔍 문제 해결

### 환경변수가 로드되지 않는 경우
1. `config.env` 파일이 프로젝트 루트 디렉토리에 있는지 확인
2. 파일 형식이 올바른지 확인 (UTF-8 인코딩)
3. 각 줄이 `KEY=VALUE` 형식인지 확인
4. 주석은 `#`으로 시작하는지 확인

### API 키 오류가 발생하는 경우
1. `DF_API_KEY`가 올바르게 설정되었는지 확인
2. API 키 값에 공백이나 특수문자가 없는지 확인
3. 파일을 저장한 후 스크립트를 다시 실행
